<div id="menu_menu_wrapper">
	<div class="display_menu block_menu" align="center">

		<!-- 閉じるボタン -->
		<div class='menu_item menu_close' style='position: absolute; top: 24px; left: 1192px;'>
		<a title="ゲームに戻る" href="javascript:void(0)"><img src="data/others/plugin/theme_kopanda_22_HD_anim/image/system/menu_btn_close.png"></a>
		</div>

			<div>
				<!-- 
				<div class="menu_item menu_save">
				<a title="ゲームデータ保存" href="javascript:void(0)"><img src="data/others/plugin/theme_kopanda_22_HD_anim/image/system/menu_btn_save.png"></a>
				</div>

				<div class="menu_item menu_load">
				<a title="ゲームデータ読込" href="javascript:void(0)"><img src="data/others/plugin/theme_kopanda_22_HD_anim/image/system/menu_btn_load.png"></a>
				</div>
				-->

				<div class="menu_item menu_config">
				<a title="環境設定" href="javascript:void(0)" onclick="myobj.config();">
				<img src="data/others/plugin/theme_kopanda_22_HD_anim/image/system/menu_btn_config.png">
				</a>
				</div>

				<div class="menu_item menu_back_title">
				<a title="タイトル画面へ戻る" href="javascript:void(0)"><img src="data/others/plugin/theme_kopanda_22_HD_anim/image/system/menu_btn_title.png"></a>
				</div>

			</div>
		</div>

		<!-- 背景画像 -->
		<img class="img_bg_base" src='data/others/plugin/theme_kopanda_22_HD_anim/image/system/menu_bg.png' style='z-index:-1;left:0;top:0;width:100%;height:100%;position:absolute;'>

		<!-- ボタンホバー時に画像を変更する -->
		<script>
			tyrano.plugin.kag.ftag.startTag("free_filter");

			// 1.ボタンのマウスダウン時に画像を変更
			// 2.タッチデバイス使用時、タップしたときに画像を変更

			$("#menu_menu_wrapper .menu_item img").each((i, elm) => {
				const j_elm = $(elm);
				const original_src = j_elm.attr("src");
				const hover_src = original_src.replace(".png", "_hov.png");
				const click_src = original_src.replace(".png", "_clk.png");

				let isMouseDown = false;

				// ホバー時（マウスが上にあるとき）
				j_elm.hover(
					() => {
						if (!isMouseDown) j_elm.attr("src", hover_src);
					},
					() => {
						if (!isMouseDown) j_elm.attr("src", original_src);
					}
				);

				// マウス押下時
				j_elm.on("mousedown", () => {
					isMouseDown = true;
					j_elm.attr("src", click_src);
				});

				// マウス離したとき
				$(document).on("mouseup", () => {
					if (isMouseDown) {
						isMouseDown = false;
						if (j_elm.is(":hover")) {
							j_elm.attr("src", hover_src);
						} else {
							j_elm.attr("src", original_src);
						}
					}
				});

				// タッチデバイス対応
				j_elm.on("touchstart", () => {
					j_elm.attr("src", click_src);
				});
				j_elm.on("touchend touchcancel", () => {
					j_elm.attr("src", original_src);
				});
			});

		</script>

</div>
